<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ピアノチャレンジ！</title>
    <script src="https://unpkg.com/tone@14.8.49/build/Tone.js"></script>
    <!-- Tone.js Instruments: Piano サンプル音源 -->
    <!-- サンプル音源は https://gleitz.github.io/midi-js-soundfonts/ なども利用可能 -->
</head>
<body>
    <header>
        <h1>🎹 ピアノチャレンジ！ 🎶</h1>
    </header>

    <main>
        <div id="youtube-player-container">
            <div id="youtube-player"></div>
        </div>

        <div id="controls">
            <div class="control-group">
                <label for="midi-file-input" class="button-label">
                    MIDIファイルを選択
                    <input type="file" id="midi-file-input" accept=".mid,.midi">
                </label>
                <span id="midi-file-name">ファイルが選択されていません</span>
            </div>

            <div class="control-group">
                <label for="youtube-id-input">YouTube 動画ID:</label>
                <input type="text" id="youtube-id-input" placeholder="例: hgE8gB_Y_5Y">
            </div>

            <button id="play-pause-button" disabled>▶️ 再生</button>
            <button id="midi-sound-toggle" disabled>MIDI音をON</button>
        </div>

        <div id="feedback-area">
            <p id="judgment-text" class="feedback-message">ここに判定結果</p>
            <p class="score-display">スコア: <span id="score">0</span></p>
            <p class="debug-info">検出ピッチ: <span id="detected-pitch">-</span></p>
        </div>

        <div id="message-box" class="hidden">
            <p id="message-content"></p>
            <button id="message-close-button">閉じる</button>
        </div>
    </main>

    <footer>
        <p>© 2025 ピアノチャレンジ！</p>
    </footer>

    <script src="https://unpkg.com/@tonejs/midi"></script>
    <script src="script.js?v=2" type="module" defer></script>
</body>
</html>
